@startuml
!theme plain

' Global dark theme settings
skinparam backgroundColor #000000
skinparam defaultFontColor #FFFFFF
skinparam linetype ortho

' Node specific settings
skinparam node {
    BackgroundColor #000000
    BorderColor #FFFFFF
    FontColor #FFFFFF
}

skinparam cloud {
    BackgroundColor #222222
    BorderColor #FFFFFF
    FontColor #FFFFFF
}

skinparam arrow {
    Color #FFFFFF
    FontColor #FFFFFF
}

' Colors definition
!$PEER_A_COLOR = "#87CEEB"
!$RELAY_PEER_COLOR = "#FFFFDD"
!$PEER_B_COLOR = "#FFB6C1"
!$TUNNEL_COLOR = "#00FF00"
!$ENCRYPTED_COLOR = "#FF0000"

title PQVpn: Secure Relay Topology

node "Private Network (NAT)" {
    component "PeerA" as PA #$PEER_A_COLOR
}

cloud "Public Internet" {
    component "RelayPeer" as RP #$RELAY_PEER_COLOR
}

node "Target Network" {
    component "PeerB" as PB #$PEER_B_COLOR
}

' Connections
PA <--> RP : Encrypted Connection\n(TLS/TCP/UDP)
RP <--> PB : Encrypted Connection\n(TLS/TCP/UDP)

' Logical Tunnel
PA ..> PB : <color:$TUNNEL_COLOR><b>End-to-End Encrypted Tunnel (Kyber/Aes256)</b></color>
note on link
  Data flows through RelayPeer
  but RelayPeer <b>CANNOT</b> decrypt it.
end note

note bottom of RP
  <b>Relay Function:</b>
  - Blind Forwarding
  - NAT Traversal
  - IP Masking
end note

@enduml
