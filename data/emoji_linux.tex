% Linux emoji configuration
\usepackage{fontspec}
\usepackage{adjustbox}
\usepackage{xcolor}
\usepackage{colortbl}

% Define pandocbounded command if not available
\providecommand{\pandocbounded}[1]{#1}

% Set main fonts with full Unicode support including CJK
\setmainfont{Noto Sans}[
  BoldFont=Noto Sans Bold,
  ItalicFont=Noto Sans Italic,
  BoldItalicFont=Noto Sans Bold Italic
]

% Set monospace font that supports box-drawing characters and Unicode
\setmonofont{DejaVu Sans Mono}[Scale=0.9]

% Set emoji and symbol font - Symbola has excellent Unicode coverage
\newfontfamily\emojifont{Symbola}

% Set Japanese font for CJK characters
\newfontfamily\japanesefont{Noto Sans CJK JP}[Scale=1.0]

% Command to render emoji
\newcommand{\emoji}[1]{{\emojifont #1}}

% Command to render Japanese text
\newcommand{\jp}[1]{{\japanesefont #1}}

% Map Unicode characters to emoji font
\usepackage{newunicodechar}

% Essential emojis from the document - use emoji font
\newunicodechar{ğŸ“š}{\emoji{ğŸ“š}}
\newunicodechar{ğŸ§ }{\emoji{ğŸ§ }}
\newunicodechar{ğŸ—}{\emoji{ğŸ—}}
\newunicodechar{âš™}{\emoji{âš™}}
\newunicodechar{ğŸ¦€}{\emoji{ğŸ¦€}}
\newunicodechar{ğŸ¤–}{\emoji{ğŸ¤–}}
\newunicodechar{âœ…}{\emoji{âœ…}}
\newunicodechar{âŒ}{\emoji{âŒ}}
\newunicodechar{âš }{\emoji{âš }}
\newunicodechar{ğŸ”§}{\emoji{ğŸ”§}}
\newunicodechar{ğŸ’»}{\emoji{ğŸ’»}}
\newunicodechar{ğŸ”’}{\emoji{ğŸ”’}}
\newunicodechar{âš¡}{\emoji{âš¡}}
\newunicodechar{ğŸ§ª}{\emoji{ğŸ§ª}}
\newunicodechar{ğŸ“Š}{\emoji{ğŸ“Š}}
\newunicodechar{ğŸš€}{\emoji{ğŸš€}}
\newunicodechar{ğŸ‰}{\emoji{ğŸ‰}}
\newunicodechar{ğŸ”„}{\emoji{ğŸ”„}}
\newunicodechar{ğŸ¯}{\emoji{ğŸ¯}}
\newunicodechar{ğŸ’¡}{\emoji{ğŸ’¡}}
\newunicodechar{ğŸ”¥}{\emoji{ğŸ”¥}}
\newunicodechar{â­}{\emoji{â­}}
\newunicodechar{ğŸŒŸ}{\emoji{ğŸŒŸ}}
\newunicodechar{ğŸ’}{\emoji{ğŸ’}}
\newunicodechar{ğŸ›¡}{\emoji{ğŸ›¡}}
\newunicodechar{ğŸ”‘}{\emoji{ğŸ”‘}}
\newunicodechar{ğŸ¨}{\emoji{ğŸ¨}}
\newunicodechar{ğŸ’‹}{\emoji{ğŸ’‹}}
\newunicodechar{ğŸ”·}{\emoji{ğŸ”·}}
\newunicodechar{ğŸ”¶}{\emoji{ğŸ”¶}}
\newunicodechar{ğŸ”´}{\emoji{ğŸ”´}}
\newunicodechar{ğŸŸ¢}{[GREEN]}
\newunicodechar{ğŸ†}{\emoji{ğŸ†}}
\newunicodechar{ğŸ¥‡}{\emoji{ğŸ¥‡}}
\newunicodechar{ğŸ¥ˆ}{\emoji{ğŸ¥ˆ}}
\newunicodechar{ğŸ¥‰}{\emoji{ğŸ¥‰}}

% Mathematical symbols - keep as-is using Symbola font
\newunicodechar{â‰ˆ}{\emoji{â‰ˆ}}
\newunicodechar{â†’}{\emoji{â†’}}
\newunicodechar{â‰¤}{\emoji{â‰¤}}
\newunicodechar{âˆš}{\emoji{âˆš}}
\newunicodechar{â†”}{\emoji{â†”}}
\newunicodechar{â‹†}{\emoji{â‹†}}
\newunicodechar{â˜…}{\emoji{â˜…}}
\newunicodechar{â—‡}{\emoji{â—‡}}
\newunicodechar{â–‘}{\emoji{â–‘}}

% Japanese characters - use Japanese font
\newunicodechar{ã‚¹}{\jp{ã‚¹}}
\newunicodechar{ã™}{\jp{ã™}}
\newunicodechar{ã‚«}{\jp{ã‚«}}
\newunicodechar{ã¤}{\jp{ã¤}}
\newunicodechar{ãˆ}{\jp{ãˆ}}
\newunicodechar{ãƒ¬}{\jp{ãƒ¬}}
\newunicodechar{ã‚µ}{\jp{ã‚µ}}
\newunicodechar{ã‘}{\jp{ã‘}}
\newunicodechar{ã¸}{\jp{ã¸}}
\newunicodechar{ãƒ¯}{\jp{ãƒ¯}}
\newunicodechar{ã•}{\jp{ã•}}
\newunicodechar{ã»}{\jp{ã»}}
\newunicodechar{ã}{\jp{ã}}
\newunicodechar{ã¦}{\jp{ã¦}}
\newunicodechar{ã‚½}{\jp{ã‚½}}
\newunicodechar{ã}{\jp{ã}}
\newunicodechar{ã„}{\jp{ã„}}
\newunicodechar{ã¨}{\jp{ã¨}}
\newunicodechar{ã®}{\jp{ã®}}
\newunicodechar{ãƒ¡}{\jp{ãƒ¡}}
\newunicodechar{ã‚€}{\jp{ã‚€}}
\newunicodechar{ãƒ«}{\jp{ãƒ«}}
\newunicodechar{ãƒˆ}{\jp{ãƒˆ}}
\newunicodechar{ã‚}{\jp{ã‚}}
\newunicodechar{ãƒ„}{\jp{ãƒ„}}
\newunicodechar{ã‚»}{\jp{ã‚»}}

% Other symbols - use emoji font
\newunicodechar{â™«}{\emoji{â™«}}
\newunicodechar{â˜}{\emoji{â˜}}

% Greek letters - use emoji font
\newunicodechar{Î±}{\emoji{Î±}}
\newunicodechar{Î´}{\emoji{Î´}}
\newunicodechar{Ï†}{\emoji{Ï†}}
\newunicodechar{Ï„}{\emoji{Ï„}}
\newunicodechar{Î»}{\emoji{Î»}}
\newunicodechar{Ï€}{\emoji{Ï€}}
\newunicodechar{Î”}{\emoji{Î”}}
\newunicodechar{Î•}{\emoji{Î•}}
\newunicodechar{Îµ}{\emoji{Îµ}}

% Box-drawing characters for tree structures
\newunicodechar{â”œ}{+}
\newunicodechar{â”€}{-}
\newunicodechar{â”‚}{|}
\newunicodechar{â””}{+}
\newunicodechar{â”Œ}{+}
\newunicodechar{â”}{+}
\newunicodechar{â”˜}{+}
\newunicodechar{â”¬}{+}
\newunicodechar{â”´}{+}
\newunicodechar{â”¼}{+}
\newunicodechar{â”}{=}
\newunicodechar{â”ƒ}{|}
\newunicodechar{â”}{+}
\newunicodechar{â”“}{+}
\newunicodechar{â”—}{+}
\newunicodechar{â”›}{+}

% Handle variation selectors (invisible characters)
\newunicodechar{ï¸}{}  % Variation Selector-16