% Linux emoji configuration (LuaLaTeX)
\usepackage{fontspec}
\usepackage{adjustbox}
\usepackage{xcolor}
\usepackage{colortbl}

% Define pandocbounded command if not available
\providecommand{\pandocbounded}[1]{#1}

\renewcommand{\familydefault}{\sfdefault}


% Set main fonts with full Unicode support including CJK
\setmainfont{Noto Sans}[
  BoldFont=Noto Sans Bold,
  ItalicFont=Noto Sans Italic,
  BoldItalicFont=Noto Sans Bold Italic
]

% Set monospace font
\setmonofont{DejaVu Sans Mono}[Scale=0.9]

% Set emoji font to Noto Color Emoji with HarfBuzz renderer for color support
\newfontfamily\emojifont{Noto Color Emoji}[Renderer=HarfBuzz]

% Set Japanese font for CJK characters
\newfontfamily\japanesefont{Noto Sans CJK JP}[Scale=1.0]

% Command to render emoji (generic wrapper)
\newcommand{\emoji}[1]{{\emojifont #1}}

% Command to render Japanese text
\newcommand{\jp}[1]{{\japanesefont #1}}

% Map Unicode characters to emoji font
\usepackage{newunicodechar}

% Standard Emojis - Using Noto Color Emoji
% LuaLaTeX with HarfBuzz usually handles these automatically if the font is set as main font or fallback,
% but explicit mapping ensures they use the correct font family.

% Explicit mappings for emojis used in documentation
\newunicodechar{ğŸ“š}{\emoji{ğŸ“š}}
\newunicodechar{ğŸ§ }{\emoji{ğŸ§ }}
\newunicodechar{ğŸ—}{\emoji{ğŸ—}}
\newunicodechar{âš™}{\emoji{âš™}}
\newunicodechar{ğŸ¦€}{\emoji{ğŸ¦€}}
\newunicodechar{ğŸ¤–}{\emoji{ğŸ¤–}}
\newunicodechar{âœ…}{\emoji{âœ…}}
\newunicodechar{âŒ}{\emoji{âŒ}}
\newunicodechar{âš }{\emoji{âš }}
\newunicodechar{ğŸ”§}{\emoji{ğŸ”§}}
\newunicodechar{ğŸ’»}{\emoji{ğŸ’»}}
\newunicodechar{ğŸ”’}{\emoji{ğŸ”’}}
\newunicodechar{âš¡}{\emoji{âš¡}}
\newunicodechar{ğŸ§ª}{\emoji{ğŸ§ª}}
\newunicodechar{ğŸ“Š}{\emoji{ğŸ“Š}}
\newunicodechar{ğŸš€}{\emoji{ğŸš€}}
\newunicodechar{ğŸ‰}{\emoji{ğŸ‰}}
\newunicodechar{ğŸ”„}{\emoji{ğŸ”„}}
\newunicodechar{ğŸ¯}{\emoji{ğŸ¯}}
\newunicodechar{ğŸ’¡}{\emoji{ğŸ’¡}}
\newunicodechar{ğŸ”¥}{\emoji{ğŸ”¥}}
\newunicodechar{â­}{\emoji{â­}}
\newunicodechar{ğŸŒŸ}{\emoji{ğŸŒŸ}}
\newunicodechar{ğŸ’}{\emoji{ğŸ’}}
\newunicodechar{ğŸ›¡}{\emoji{ğŸ›¡}}
\newunicodechar{ğŸ”‘}{\emoji{ğŸ”‘}}
\newunicodechar{ğŸ¨}{\emoji{ğŸ¨}}
\newunicodechar{ğŸ’‹}{\emoji{ğŸ’‹}}
\newunicodechar{ğŸ”·}{\emoji{ğŸ”·}}
\newunicodechar{ğŸ”¶}{\emoji{ğŸ”¶}}
\newunicodechar{ğŸ”´}{\emoji{ğŸ”´}}
\newunicodechar{ğŸŸ¢}{\emoji{ğŸŸ¢}}
\newunicodechar{ğŸ†}{\emoji{ğŸ†}}
\newunicodechar{ğŸ¥‡}{\emoji{ğŸ¥‡}}
\newunicodechar{ğŸ¥ˆ}{\emoji{ğŸ¥ˆ}}
\newunicodechar{ğŸ¥‰}{\emoji{ğŸ¥‰}}

% Mathematical symbols - use main font or specific math font if needed,
% ensuring they don't break if present in emoji font.
\newunicodechar{â‰ˆ}{â‰ˆ}
\newunicodechar{â†’}{â†’}
\newunicodechar{â‰¤}{â‰¤}
\newunicodechar{âˆš}{âˆš}
\newunicodechar{â†”}{â†”}
\newunicodechar{â‹†}{â‹†}
\newunicodechar{â˜…}{\emoji{â˜…}}
\newunicodechar{â—‡}{â—‡}
\newunicodechar{â–‘}{â–‘}

% Japanese characters - use Japanese font
\newunicodechar{ã‚¹}{\jp{ã‚¹}}
\newunicodechar{ã™}{\jp{ã™}}
\newunicodechar{ã‚«}{\jp{ã‚«}}
\newunicodechar{ã¤}{\jp{ã¤}}
\newunicodechar{ãˆ}{\jp{ãˆ}}
\newunicodechar{ãƒ¬}{\jp{ãƒ¬}}
\newunicodechar{ã‚µ}{\jp{ã‚µ}}
\newunicodechar{ã‘}{\jp{ã‘}}
\newunicodechar{ã¸}{\jp{ã¸}}
\newunicodechar{ãƒ¯}{\jp{ãƒ¯}}
\newunicodechar{ã•}{\jp{ã•}}
\newunicodechar{ã»}{\jp{ã»}}
\newunicodechar{ã}{\jp{ã}}
\newunicodechar{ã¦}{\jp{ã¦}}
\newunicodechar{ã‚½}{\jp{ã‚½}}
\newunicodechar{ã}{\jp{ã}}
\newunicodechar{ã„}{\jp{ã„}}
\newunicodechar{ã¨}{\jp{ã¨}}
\newunicodechar{ã®}{\jp{ã®}}
\newunicodechar{ãƒ¡}{\jp{ãƒ¡}}
\newunicodechar{ã‚€}{\jp{ã‚€}}
\newunicodechar{ãƒ«}{\jp{ãƒ«}}
\newunicodechar{ãƒˆ}{\jp{ãƒˆ}}
\newunicodechar{ã‚}{\jp{ã‚}}
\newunicodechar{ãƒ„}{\jp{ãƒ„}}
\newunicodechar{ã‚»}{\jp{ã‚»}}

% Other symbols
\newunicodechar{â™«}{\emoji{â™«}}
\newunicodechar{â˜}{\emoji{â˜}}

% Greek letters
\newunicodechar{Î±}{Î±}
\newunicodechar{Î´}{Î´}
\newunicodechar{Ï†}{Ï†}
\newunicodechar{Ï„}{Ï„}
\newunicodechar{Î»}{Î»}
\newunicodechar{Ï€}{Ï€}
\newunicodechar{Î”}{Î”}
\newunicodechar{Î•}{Î•}
\newunicodechar{Îµ}{Îµ}

% Box-drawing characters
\newunicodechar{â”œ}{+}
\newunicodechar{â”€}{-}
\newunicodechar{â”‚}{|}
\newunicodechar{â””}{+}
\newunicodechar{â”Œ}{+}
\newunicodechar{â”}{+}
\newunicodechar{â”˜}{+}
\newunicodechar{â”¬}{+}
\newunicodechar{â”´}{+}
\newunicodechar{â”¼}{+}
\newunicodechar{â”}{=}
\newunicodechar{â”ƒ}{|}
\newunicodechar{â”}{+}
\newunicodechar{â”“}{+}
\newunicodechar{â”—}{+}
\newunicodechar{â”›}{+}

% Handle variation selectors
\newunicodechar{ï¸}{}  % Variation Selector-16